actions:
  - name: Test
    container_image: ubuntu-20.04
    triggers:
      push:
        branches:
          - "master"
      pull_request:
        branches:
          - "master"
    bazel_commands:
      - run //:setup_ci --config=workflows
      - --bazelrc=custom.bazelrc build //... --config=workflows --test_tag_filters=-performance,-webdriver,-docker
      - --bazelrc=custom.bazelrc test //... --config=workflows --test_tag_filters=-performance,-webdriver,-docker

plugins:
  - path: cli/plugins/go-deps
  - path: cli/plugins/open-invocation
  - path: cli/plugins/notify
  - path: cli/example_plugins/go-highlight
  - path: cli/example_plugins/ping-remote
