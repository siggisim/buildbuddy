actions:
  - name: Test
    container_image: ubuntu-20.04
    triggers:
      push:
        branches:
          - "foo"
      pull_request:
        branches:
          - "master"
    bazel_commands:
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR
      - test //server/util... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR --build_tests_only
      - build //... --config=workflows --build_tag_filters=-no-bazelci --repo_env=FOO=BAR

plugins:
  - path: cli/plugins/go-deps
  - path: cli/plugins/open-invocation
  - path: cli/plugins/notify
  - path: cli/example_plugins/go-highlight
  - path: cli/example_plugins/ping-remote
